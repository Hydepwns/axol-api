# MinIO Client Configuration for {{ inventory_hostname }}
# Generated by Ansible - Do not edit manually

# Connection details for MinIO server
MINIO_SERVER={% if minio_server is defined %}{{ minio_server }}{% else %}{{ groups['minio_servers'][0] }}{% endif %}
MINIO_SERVER_PORT={{ hostvars[groups['minio_servers'][0]]['minio_server_port'] | default('9000') }}
MINIO_CONSOLE_PORT={{ hostvars[groups['minio_servers'][0]]['minio_console_port'] | default('9001') }}

# Credentials (these are read from the server's vault)
MINIO_ACCESS_KEY={{ minio_root_user }}
MINIO_SECRET_KEY={{ minio_root_password }}

# Connection protocol
{% if minio_enable_ssl | default(false) %}
MINIO_PROTOCOL=https
{% else %}
MINIO_PROTOCOL=http
{% endif %}

# Client configuration
MINIO_API_URL=${MINIO_PROTOCOL}://${MINIO_SERVER}:${MINIO_SERVER_PORT}
MINIO_CONSOLE_URL=${MINIO_PROTOCOL}://${MINIO_SERVER}:${MINIO_CONSOLE_PORT}

# Node-specific settings
NODE_TYPE={{ node_type | default('unknown') }}
{% if blockchain_data_type is defined %}
BLOCKCHAIN_DATA_TYPE={{ blockchain_data_type }}
{% endif %}
{% if blockchain_data_types is defined %}
BLOCKCHAIN_DATA_TYPES={{ blockchain_data_types | join(',') }}
{% endif %}

# Bucket access settings for this node
BUCKET_NAME={{ node_type | default('unknown') }}_data

# Example shell function to quickly connect to MinIO with mc
# Add to /etc/profile.d/minio-client.sh:
#
# function mcsetup() {
#   mc config host add myminio ${MINIO_API_URL} ${MINIO_ACCESS_KEY} ${MINIO_SECRET_KEY}
#   echo "MinIO client configured for ${MINIO_API_URL}"
# }
